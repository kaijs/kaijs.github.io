<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: common/c.class.inherit.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: common/c.class.inherit.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class
 * @name cCoreInherit
 * @description Class类，框架的基础类体系
 */
define([], function () {
  "use strict";
  var slice = [].slice;
  var Core = function () {
  };


  /**
   * @description Class方法，js的继承
   * @method cCoreInherit.Class
   * @param {function} supClass 可选，要继承的类
   * @param {object} subProperty 被创建类的成员
   * @return {function} 被创建的类
   * @example
   * var Parent = cCoreInherit.Class({
   *  //定义类属性
   *  __propertys__ : function () {
   *    this.Name = 'Parent';
   *    this.Type = 'Animal'
   *  },
   *  //构造方法
   *  initialize: function (options) {
   *
     *  },
     *
     *  //定义类方法
     *  sayHello: function(name){
     *    console.log('parent say : hello '+ name +'!');
     *  }
   * });
   *
   * var Child = cCoreInherit.Class(Parent,{
   *  //定义类属性
   *  __propertys__ : function () {
   *    this.Name = 'Child'
   *  },
   *  //构造方法
   *  initialize: function ($super, options) {
   *   //调用父类的构造方法
   *   $super(options);
   *  },
   *
   *  sayHello: function($super, name){
     *    //调用父类的方法
     *    $super(name);
     *    console.log('child say : hello '+ name +'!');
     *  }
   * });
   *
   * var parent = new Parent();
   * var child = new Child ();
   * parent.sayHello('anders')
   * //parent say : hello anders!
   * child.sayHello('jack');
   * //parent say : hello jack!
   * //child say : hello jack!
   */
  Core.Class = function () {
    if (arguments.length === 0 || arguments.length > 2) {
      throw '参数错误';
    }

    var parent = null;
    //将参数转换为数组
    var properties = slice.call(arguments);

    //如果第一个参数为类（function），那么就将之取出
    if (typeof properties[0] === 'function') {
      parent = properties.shift();
    }
    properties = properties[0];

    function klass() {
      this.__propertys__();
      //if(arguments.length > 0){
        this.initialize.apply(this, arguments);
      //}
    }

    klass.superclass = parent;
    klass.subclasses = [];

    var sup__propertys__ = function () {
    };
    var sub__propertys__ = properties.__propertys__ || function () {
    };

    if (parent) {
      if (parent.prototype.__propertys__) {
        sup__propertys__ = parent.prototype.__propertys__;
      }
      var Subclass = function () {
      };
      Subclass.prototype = parent.prototype;
      klass.prototype = new Subclass();
      parent.subclasses.push(klass);
    }


    var ancestor = klass.superclass &amp;&amp; klass.superclass.prototype;
    var subclassfn = function (methodName, fn) {
      return function () {
        var scope = this;
        var args = [function () {
          return ancestor[methodName].apply(scope, arguments);
        } ];
        return fn.apply(this, args.concat(slice.call(arguments)));
      };
    };
    for (var k in properties) {
      var value = properties[k];

      //满足条件就重写
      if (ancestor &amp;&amp; typeof value == 'function') {
        var argslist = /^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(value.toString())[1].replace(/\s/i, '').split(',');
        //只有在第一个参数为$super情况下才需要处理（是否具有重复方法需要用户自己决定）
        if (argslist[0] === '$super' &amp;&amp; ancestor[k]) {
          value = subclassfn(k, value);
        }
      }

      klass.prototype[k] = value;
    }

    if (!klass.prototype.initialize) {
      klass.prototype.initialize = function () {
      };
    }

    //兼容现有框架，__propertys__方法直接重写
    klass.prototype.__propertys__ = function () {
      sup__propertys__.call(this);
      sub__propertys__.call(this);
    };

//   //兼容代码，非原型属性也需要进行继承
//   for (key in parent) {
//     if (parent.hasOwnProperty(key) &amp;&amp; key !== 'prototype')
//       klass[key] = parent[key];
//   }

    //兼容代码，非原型属性也需要进行继承
    for (var key in parent) {
      if (parent.hasOwnProperty(key) &amp;&amp; key !== 'prototype' &amp;&amp; key !== 'superclass') {
        klass[key] = parent[key];
      }
    }

    klass.prototype.constructor = klass;

    return klass;
  };


  /**
   * @description 对象扩展
   * @method cCoreInherit.extend
   * @param {object} targetObj 原型对象
   * @param {object} sourceObj1 要继承的对象1
   * @param {object} ... 要继承的对象2
   * @returns {object} res
   * @example
   *  var O1 = {
   *    "name" : "jim"
   *  };
   *
   *  var O2 = {
   *    "age": 18
   *  }
   *
   *  var O3 = {};
   *  cCoreInherit.extend(O3,O1,O2)
   *  // O3 = {
   *    "name" : "jim",
   *    "age": 18
   *  }
   */
  Core.extend = function () {
    var args = slice.call(arguments);
    var source = args.shift() || {};

    if (!source) {
      return false;
    }

    for (var i = 0, l = args.length; i &lt; l; i++) {
      if (typeof args[i] === 'object') {
        for (var key in args[i]) {
          source[key] = args[i][key];
        }
      }
    }

    return source;
  };

  /**
   * @description 对原型链的扩充
   * @method cCoreInherit.implement
   * @param {function} fn 构造函数
   * @param {object} propertys 需要補充在原型链上的方法和属性
   * @returns {Function}
   * @example
   * var Car = cCoreInherit.class({});
   * cCoreInherit.implement(Car, {});
   */
  Core.implement = function (fn, propertys) {
    if (typeof fn !== 'function') {
      return false;
    }

    for (var i in propertys) {
      fn.prototype[i] = propertys[i];
    }

    return fn;
  };

  return Core;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_checkSelectedDown.html">_checkSelectedDown</a></li><li><a href="-_checkSelectedUp.html">_checkSelectedUp</a></li><li><a href="c.ui.imageSlider.html">imageSlider</a></li><li><a href="cAbstractModel.html">cAbstractModel</a></li><li><a href="cAbstractStore.html">cAbstractStore</a></li><li><a href="cBase.html">cBase</a></li><li><a href="cCoreInherit.html">cCoreInherit</a></li><li><a href="cModel.html">cModel</a></li><li><a href="cPageList.html">cPageList</a></li><li><a href="cSessionStore.html">cSessionStore</a></li><li><a href="cStore.html">cStore</a></li><li><a href="cUIInputClear.html">cUIInputClear</a></li><li><a href="cUserModel.ClientIdModel.html">ClientIdModel</a></li><li><a href="cUserModel.GetUserModel.html">GetUserModel</a></li><li><a href="cUserModel.NotUserLoginModel.html">NotUserLoginModel</a></li><li><a href="cUserModel.ThirdPartInfoModel.html">ThirdPartInfoModel</a></li><li><a href="cUserModel.UserLoginModel.html">UserLoginModel</a></li><li><a href="Service.cGeo.Address.html">Address</a></li><li><a href="Service.cGeo.City.html">City</a></li><li><a href="Service.cGeo.Coordinate.html">Coordinate</a></li><li><a href="Service.cGeo.Geolocation.html">Geolocation</a></li><li><a href="Service.cGeo.Map.html">Map</a></li><li><a href="Service.cGeo.Map.Icon.html">Icon</a></li><li><a href="Service.cGeo.Map.Layer.html">Layer</a></li><li><a href="Service.cGeo.Map.Mark.html">Mark</a></li><li><a href="Service.cGeo.MapS.html">MapS</a></li><li><a href="Service.cGeo.POI.html">POI</a></li><li><a href="Service.cGeo.POIQuery.html">POIQuery</a></li><li><a href="UICalendarCommon.html">UICalendarCommon</a></li><li><a href="UIScroll.html">UIScroll</a></li><li><a href="UIView.html">UIView</a></li><li><a href="Util.cUtilData.CData.html">CData</a></li><li><a href="Util.cUtilDate.CDate.html">CDate</a></li></ul><h3>Namespaces</h3><ul><li><a href="-_.dateUtil.html">dateUtil</a></li><li><a href="cAjax.html">cAjax</a></li><li><a href="Common.cMessageCenter.html">cMessageCenter</a></li><li><a href="Service.cGeo.html">Service.cGeo</a></li><li><a href="Storage.cAbstractStorage.html">cAbstractStorage</a></li><li><a href="Storage.cLocalStorage.html">cLocalStorage</a></li><li><a href="Storage.cMemoryStorage.html">cMemoryStorage</a></li><li><a href="Storage.cSessionStorage.html">cSessionStorage</a></li><li><a href="Store.cCommonStore.html">cCommonStore</a></li><li><a href="Store.cCommonStore.cHeadStore.html">cHeadStore</a></li><li><a href="Store.cCommonStore.cMobileTokenStore.html">cMobileTokenStore</a></li><li><a href="Store.cCommonStore.cUserStore.html">cUserStore</a></li><li><a href="Store.cMarketStore.html">cMarketStore</a></li><li><a href="Store.cMarketStore.SalesObjectStore.html">SalesObjectStore</a></li><li><a href="Store.cMarketStore.SalesStore.html">SalesStore</a></li><li><a href="Store.cMarketStore.UnionStore.html">UnionStore</a></li><li><a href="Store.cMemoryStore.html">cMemoryStore</a></li><li><a href="Util.cUtilCacheViews.html">cUtilCacheViews</a></li><li><a href="Util.cUtilCryptBase64.html">cUtilCryptBase64</a></li><li><a href="Util.cUtilCryptBase64.Base64.html">Base64</a></li><li><a href="Util.cUtilCryptRSA.html">cUtilCryptRSA</a></li><li><a href="Util.cUtilDate.html">cUtilDate</a></li><li><a href="Util.cUtilObject.html">cUtilObject</a></li><li><a href="Util.cUtilPath.html">cUtilPath</a></li><li><a href="Util.cUtilPerformance.html">cUtilPerformance</a></li><li><a href="Util.cUtilValidate.html">cUtilValidate</a></li><li><a href="Util.dgrid.html">dgrid</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_stores%255Bundefined%255D">_stores[undefined]</a></li><li><a href="global.html#abort">abort</a></li><li><a href="global.html#bindEvents">bindEvents</a></li><li><a href="global.html#bindthis">bindthis</a></li><li><a href="global.html#buildurl">buildurl</a></li><li><a href="global.html#childViewNames">childViewNames</a></li><li><a href="global.html#clearResult">clearResult</a></li><li><a href="global.html#cPageView#onCreateopts%257B%257D">cPageView#onCreate
            opts {
          }</a></li><li><a href="global.html#createElement">createElement</a></li><li><a href="global.html#createRoot">createRoot</a></li><li><a href="global.html#excute">excute</a></li><li><a href="global.html#execute">execute</a></li><li><a href="global.html#extension">extension</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getAttr">getAttr</a></li><li><a href="global.html#getBiggerzIndex">getBiggerzIndex</a></li><li><a href="global.html#getCookieVal">getCookieVal</a></li><li><a href="global.html#getCreateId">getCreateId</a></li><li><a href="global.html#getCurStyleOfEl">getCurStyleOfEl</a></li><li><a href="global.html#getDirtyItems">getDirtyItems</a></li><li><a href="global.html#getElementPos">getElementPos</a></li><li><a href="global.html#getElementRealSize">getElementRealSize</a></li><li><a href="global.html#getExpireTime">getExpireTime</a></li><li><a href="global.html#getMousePosOfElement">getMousePosOfElement</a></li><li><a href="global.html#getPageScrollPos">getPageScrollPos</a></li><li><a href="global.html#getPageSize">getPageSize</a></li><li><a href="global.html#getParam">getParam</a></li><li><a href="global.html#getQuery">getQuery</a></li><li><a href="global.html#getResult">getResult</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#InputClear">InputClear</a></li><li><a href="global.html#isUseH5Sys">isUseH5Sys</a></li><li><a href="global.html#key">key</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#presetData">presetData</a></li><li><a href="global.html#propertys">propertys</a></li><li><a href="global.html#pushValidates">pushValidates</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeAttr">removeAttr</a></li><li><a href="global.html#rollback">rollback</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setAttr">setAttr</a></li><li><a href="global.html#setConfig">setConfig</a></li><li><a href="global.html#setExpireTime">setExpireTime</a></li><li><a href="global.html#setLifeTime">setLifeTime</a></li><li><a href="global.html#setParam">setParam</a></li><li><a href="global.html#showLog">showLog</a></li><li><a href="global.html#showToast">showToast</a></li><li><a href="global.html#strToNum">strToNum</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Oct 13 2016 13:38:14 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
