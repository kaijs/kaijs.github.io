<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cutil/c.util.common.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cutil/c.util.common.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @File c.util.common.js
 * @Description: 常用工具方法
 * @date 2014-09-24 11:06:12
 * @version V1.0
 */
define([
  "./c.util.date"
], function (cDate) {
    var Kai = {
    };

    $.os = (typeof Zepto == 'undefined') ? {} : Zepto.os;
    var Util = {};

//----------------------------------------------------------
    /*让alert弹出框在生产环境return false，防止debug代码上生产*/
//----------------------------------------------------------
    Util.preventAlert = function(){
      if(window._alert){
        return false;//already hide alert function
      }
      window._alert = window.alert;
      window.alert = function(str) {
        console.log(str);
      };
    };

//----------------------------------------------------------
//    功能：form表单数据生成
//    参数：原始form数据
//    返回值：解析后的表单数据
//----------------------------------------------------------
Util.formatFormValue = function(orgData){
    //var testData = {"node":["初审","终审","重审",""],"name":["product","credit","fraud",""],"priority":[null,null,null,null]};
    //var orgData = testData;
    var destData = [];
    var keys = _.keys(orgData);
    var valuesArray = _.values(orgData);
    var valueItemArray = _.unzip(valuesArray);
    _.each(valueItemArray,function(valueItem){
        destData.push(_.object(keys,valueItem));
    });
    console.log(valueItemArray);
    return destData;
};
//----------------------------------------------------------
//    功能：根据身份证号获得年龄
//    参数：身份证号 idCardNum
//    返回值：年龄
//----------------------------------------------------------
Util.getAgeByIdCardNum = function (idCardNum) {
    if(!_.isString(idCardNum)){
        throw new Error('idCardNum is not valid');
        return false;
    }
    var myDate = new Date();
    var month = myDate.getMonth() + 1;
    var day = myDate.getDate();


    if (idCardNum.length === 18) {
        var age = myDate.getFullYear() - idCardNum.substring(6, 10) - 1;
        if (idCardNum.substring(10, 12) &lt; month || idCardNum.substring(10, 12) == month &amp;&amp; idCardNum.substring(12, 14) &lt;= day) {
            age++;
        }
    } else if (idCardNum.length === 15) {
        var age = myDate.getFullYear() - ('19' + idCardNum.substring(6, 8)) - 1;
        if (idCardNum.substring(8, 10) &lt; month || idCardNum.substring(8, 10) == month &amp;&amp; idCardNum.substring(10, 12) &lt;= day) {
            age++;
        }
    }


    return age;
};
//----------------------------------------------------------
//    功能：根据身份证号获得出生日期
//  参数：身份证号 psidno
//    返回值：
//    出生日期
//----------------------------------------------------------
    Util.getBirthdayById = function (psidno) {
        var birthdayno, birthdaytemp
        if (psidno.length == 18) {
            birthdayno = psidno.substring(6, 14)
        } else if (psidno.length == 15) {
            birthdaytemp = psidno.substring(6, 12)
            birthdayno = "19" + birthdaytemp
        } else {
            console.log("错误的身份证号码，请核对！");
            return false
        }
        var birthday = birthdayno.substring(0, 4) + "-" + birthdayno.substring(4, 6) + "-" + birthdayno.substring(6, 8)
        return birthday
    };

    // 首字母大写
    Util.capitalize= function (string) {
        return string.replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); });
    };

//----------------------------------------------------------
//    功能：根据身份证号获得性别
//  参数：身份证号 psidno
//    返回值：
//    性别
//----------------------------------------------------------
    Util.getSexById = function (psidno) {
        var sexno, sex
        if (psidno.length == 18) {
            sexno = psidno.substring(16, 17)
        } else if (psidno.length == 15) {
            sexno = psidno.substring(14, 15)
        } else {
            console.log("错误的身份证号码，请核对！")
            return false
        }
        var tempid = sexno % 2;
        if (tempid == 0) {
            sex = 'F'
        } else {
            sex = 'M'
        }
        return sex
    };

    /**
    */
    Util.doResponse = function (response, done, fail) {
        if (response &amp;&amp; response.responseStatus) {
            if (response.responseStatus &amp;&amp; response.responseStatus.code === '000000') {
                done(response);
            } else {
                fail({//返回错误信息码和描述
                    code: response.responseStatus.code,
                    msg: response.responseStatus.msg
                })
            }
        } else {
            fail({
                msg: '网络异常，请重试'
            })
        }
    };

    /**
     *校验字符串是否为中文
     *返回值：
     *如果为空，定义校验通过，   返回true
     *如果字串为中文，校验通过，   返回true
     *如果字串为非中文，   返回false   参考提示信息：必须为中文！
     */
    Util.isChinese = function (str) {
        //如果值为空，通过校验
        //if (str == "")  return true;
        var pattern = /^([\u4E00-\u9FA5]|[\uFE30-\uFFA0])*$/gi;
        if (pattern.test(str))  return true;
        return false;
    };

    /*
     获得字符数，英文算一个，中文算两个
     */
    Util.getLength = function (str) {
        var len = 0;
        if (typeof str == "string") {
            for (var i = 0; i &lt; str.length; i++) {
                if (str.charAt(i) > '~') {
                    len += 2;
                } else {
                    len++;
                }
            }
            return len;
        } else {
            return false
        }
    };

    /**
     *限制输入框的字符数目
     * @method Util.cUtilCommon.limitValueLength
     * @param {string} url 唤醒url，如ctripwireless://hoteml;
     */
    Util.limitValueLength = (function () {
        var lastValidValue;
        return function (e, opts) {
            var inputNode = $(e.target);//input node
            var charCode = e.charCode;//key pressed
            var tagName = inputNode[0].tagName.toLowerCase();//tagname of the input node
            var currentValue;//current value
            var warningNode = opts.warningNode;//when error shown
            var successNode = opts.successNode;//when success shown
            var commonWarningNode = opts.commonWarningNode; // 如果只需要一个错误容器来显示报错信息

            /*exact match*/
            var exactCheckFunction = opts.exactCheckFunction;// function to check if it is valid input value
            var exactMatchRegExpression = opts.exactMatchRegExpression;//精确匹配

            /*patial match*/
            var partialCheckFunction = opts.partialCheckFunction;// function to check if it is valid input value
            var partialMatchRegExpression = opts.partialMatchRegExpression;//局部匹配

            var onPartialMatchSuccess = opts.onPartialMatchSuccess || _.noop;//match
            var onPartialMatchError = opts.onPartialMatchError || _.noop;//un match
            var onExactMatchSuccess = opts.onExactMatchSuccess || _.noop;//match
            var onExactMatchError = opts.onExactMatchError || _.noop;//un match

            var maxAllowedLength = opts.maxAllowedLength || Number.POSITIVE_INFINITY;

            if (commonWarningNode) {
                warningNode = commonWarningNode.html(opts.warningText);
            }

            if (_.isRegExp(partialMatchRegExpression)) {/*动态监测的正则表达式*/
                partialMatchRegExpression = opts.partialMatchRegExpression;
            } else {
                partialMatchRegExpression = Util.partialRegExpressions[opts.valueType];
            }

            if (_.isRegExp(exactMatchRegExpression)) {/*动态监测的正则表达式*/
                exactMatchRegExpression = opts.exactMatchRegExpression;
            } else if(_.isFunction(exactMatchRegExpression)) {
                exactMatchRegExpression = opts.exactMatchRegExpression;
            }else{
                exactMatchRegExpression = Util.exactRegExpressions[opts.valueType];
            }

            if (inputNode.is("input")) {//是输入框
                currentValue = inputNode.val();
            } else {//是html
                currentValue = inputNode.html();
            }

            var currentLength = Util.getLength(currentValue);//获得当前长度，英文一个，中文两个
            var inputLength = e.charCode > 255 ? 2 : 1;
            /*判断中文还是英文*/
            var allowedLength = maxAllowedLength - currentLength;//仍然允许输入的长度
            /*允许继续输入的字符数目*/

            if (allowedLength > inputLength) {//仍然可以输入

            } else {//已经不能输入了
                if (e.keyCode == 8 || e.keyCode == 9 || e.keyCode == 12 || e.keyCode == 46) {/*删除按钮等，允许操作*/
                    return true;
                }
                e.preventDefault();//除了功能键，不允许操作
            }

            partialMatchRegExpression &amp;&amp; (partialMatchRegExpression.lastIndex = 0);
            /*局部动态检测*/

            //全局匹配检查
            if (exactMatchRegExpression
                &amp;&amp; exactMatchRegExpression.test
                &amp;&amp; exactMatchRegExpression.test(currentValue)) {//如果正则表达
                warningNode &amp;&amp; warningNode.hide();
                successNode &amp;&amp; successNode.show();
                onExactMatchSuccess();
                //return true;
            } else if (_.isFunction(exactMatchRegExpression) &amp;&amp; exactMatchRegExpression(currentValue)) {
                warningNode &amp;&amp; warningNode.hide();
                successNode &amp;&amp; successNode.show();
                onExactMatchSuccess();
                //return true;
            } else {
              //TBD
                if (e.type == 'blur') {//失去焦点时候如果不能全局匹配则报错
                  warningNode &amp;&amp; warningNode.show();
                  successNode &amp;&amp; successNode.hide();
                  onExactMatchError();
                }
            }

            if (currentLength &lt;= maxAllowedLength
                &amp;&amp; (partialMatchRegExpression ? partialMatchRegExpression.test(currentValue) : true)
                &amp;&amp; (partialCheckFunction ? partialCheckFunction(currentValue) : true)) {
                (function (currentValue) {
                    var currentValue = currentValue;
                    if (e.type == 'blur') {//如果是失去焦点 则不再进行局部匹配检查
                        //warningNode &amp;&amp; warningNode.hide();
                    }else{
                      if (Util.getLength(currentValue) &lt;= maxAllowedLength) { // to be deleted, 逻辑多余
                        if (lastValidValue !== currentValue) {
                          lastValidValue = currentValue;
                          if (partialMatchRegExpression &amp;&amp; partialMatchRegExpression.test) {/*reg text*/
                            if (partialMatchRegExpression.test(currentValue)) {
                              warningNode &amp;&amp; warningNode.hide();
                              onPartialMatchSuccess &amp;&amp; onPartialMatchSuccess();
                            } else {
                              warningNode &amp;&amp; warningNode.show();
                              successNode &amp;&amp; successNode.hide();
                              onPartialMatchError &amp;&amp; onPartialMatchError();
                            }
                          } else if (typeof partialMatchRegExpression == 'function') {/*function check*/
                            if (partialMatchRegExpression &amp;&amp; partialMatchRegExpression(currentValue) == true) {
                              warningNode &amp;&amp; warningNode.hide();
                              onPartialMatchSuccess &amp;&amp; onPartialMatchSuccess();
                            } else {
                              warningNode &amp;&amp; warningNode.show();
                              successNode &amp;&amp; successNode.hide();
                              onPartialMatchError &amp;&amp; onPartialMatchError();
                            }
                          }
                          //console.log(lastValidValue);
                          //warningNode &amp;&amp; warningNode.hide();
                        }
                      }
                    }
                })(currentValue)
            } else {
                warningNode &amp;&amp; warningNode.show();
                successNode &amp;&amp; successNode.hide();

                if (partialMatchRegExpression &amp;&amp; partialMatchRegExpression.test) {
                    if (!partialMatchRegExpression.test(currentValue)) {
                        onPartialMatchError();//动态校验失败
                    } else {
                        onPartialMatchSuccess();//动态校验成功
                    }
                } else if (typeof partialMatchRegExpression == 'function') {//传入的动态校验是函数
                    if (partialMatchRegExpression &amp;&amp; !(partialMatchRegExpression(currentValue) == true)) {
                        onPartialMatchError();//
                    } else {
                        onPartialMatchError();//
                    }
                }
                /**
                回写上次正确的输入
                */
                (function (lastValidValue) {
                    var lastValidValue = lastValidValue;
                    if (partialMatchRegExpression.test(lastValidValue)) {
                        if (tagName == 'input') {
                            inputNode.val(lastValidValue);
                            inputNode.attr("value", lastValidValue);
                        } else {
                            (tagName == "div") ? inputNode.html(lastValidValue) : inputNode.val(lastValidValue);
                        }
                        /*
                         if(partialMatchRegExpression &amp;&amp; partialMatchRegExpression.test &amp;&amp;  !partialMatchRegExpression.test(lastValidValue)){
                         onMatchError();
                         }else{
                         onMatchSuccess();
                         }*/
                    }
                })(lastValidValue);
            }
        }
    })();

    /*check password **/
    Util.checkPassword = function (code) {
        var reg = /^[a-zA-Z0-9]{6,20}$/;
        if (!reg.test(code)) {
            return false;
        } else {
            return true;
        }
    };

    /**
    检查验证码
    */
    Util.checkIdentifyingCode = function (code) {
        var reg = /^[a-zA-Z0-9]{6}$/;
        if (!reg.test(code)) {
            return false;
        } else {
            return true;
        }
    };

    /**检查电话号码有效性*/
    Util.checkCellphoneNumber = function (obj) {
        var reg = /^1[3-9]\d{9}$/;
        if (!reg.test(obj)) {
            return false;
        } else {
            return true;
        }
    };

    /**检查中文字符串的有效性*/
    Util.checkChinese = function (obj) {
        var reg = /^([\u4E00-\u9FA5]|[\uFE30-\uFFA0])+$/;
        if (!reg.test(obj)) {
            return false;
        } else {
            return true;
        }
    };

    /**检查身份证号码有效性*/
//----------------------------------------------------------
//    功能：检查身份证号码
//  参数：
//    idcard
//    返回值：
//----------------------------------------------------------
    Util.checkIdCard = function checkIdCard(idcard,opts) {
        if (typeof idcard !== 'string') {
            return false;
        }
        var Errors = new Array(
            true,
            false,//"身份证号码位数不对!",
            false,//"身份证号码出生日期超出范围或含有非法字符!",
            false,//"身份证号码校验错误!",
            false,//"身份证地区非法!"
            false//"长度不符合预设置"
        );
        var area = {
            11: "北京",
            12: "天津",
            13: "河北",
            14: "山西",
            15: "内蒙古",
            21: "辽宁",
            22: "吉林",
            23: "黑龙江",
            31: "上海",
            32: "江苏",
            33: "浙江",
            34: "安徽",
            35: "福建",
            36: "江西",
            37: "山东",
            41: "河南",
            42: "湖北",
            43: "湖南",
            44: "广东",
            45: "广西",
            46: "海南",
            50: "重庆",
            51: "四川",
            52: "贵州",
            53: "云南",
            54: "西藏",
            61: "陕西",
            62: "甘肃",
            63: "青海",
            64: "宁夏",
            65: "新疆",
            71: "台湾",
            81: "香港",
            82: "澳门",
            91: "国外"
        }

        var idcard, Y, JYM;
        var S, M;
        var idcard_array = new Array();
        idcard_array = idcard.split("");
        //地区检验
        if (area[parseInt(idcard.substr(0, 2))] == null) return Errors[4];
        //身份号码位数及格式检验
        switch (idcard.length) {
            case 15:
                if(opts &amp;&amp; opts.forceEighteen){
                  return Errors[5];
                }
                if ((parseInt(idcard.substr(6, 2)) + 1900) % 4 == 0 || ((parseInt(idcard.substr(6, 2)) + 1900) % 100 == 0 &amp;&amp;
                    (parseInt(idcard.substr(6, 2)) + 1900) % 4 == 0 )) {
                    ereg = /^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/;//测试出生日期的合法性
                } else {
                    ereg = /^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/;//测试出生日期的合法性
                }
                if (ereg.test(idcard)) return Errors[0];
                else return Errors[2];

                break;
            case 18:
                //18位身份号码检测
                //出生日期的合法性检查
                //闰年月日:((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))
                //平年月日:((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))
                if (parseInt(idcard.substr(6, 4)) % 4 == 0 || (parseInt(idcard.substr(6, 4)) % 100 == 0 &amp;&amp;
                    parseInt(idcard.substr(6, 4)) % 4 == 0 )) {
                    ereg = /^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/;//闰年出生日期的合法性正则表达式
                } else {
                    ereg = /^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/;//平年出生日期的合法性正则表达式
                }
                if (ereg.test(idcard)) {//测试出生日期的合法性
                    //计算校验位
                    S = (parseInt(idcard_array[0]) + parseInt(idcard_array[10])) * 7
                        + (parseInt(idcard_array[1]) + parseInt(idcard_array[11])) * 9
                        + (parseInt(idcard_array[2]) + parseInt(idcard_array[12])) * 10
                        + (parseInt(idcard_array[3]) + parseInt(idcard_array[13])) * 5
                        + (parseInt(idcard_array[4]) + parseInt(idcard_array[14])) * 8
                        + (parseInt(idcard_array[5]) + parseInt(idcard_array[15])) * 4
                        + (parseInt(idcard_array[6]) + parseInt(idcard_array[16])) * 2
                        + parseInt(idcard_array[7]) * 1
                        + parseInt(idcard_array[8]) * 6
                        + parseInt(idcard_array[9]) * 3;
                    Y = S % 11;
                    M = "F";
                    JYM = "10X98765432";
                    M = JYM.substr(Y, 1);//判断校验位
                    if (M == idcard_array[17]) return Errors[0]; //检测ID的校验位
                    else return Errors[3];
                }
                else return Errors[2];
                break;
            default:
                return Errors[1];
                break;
        }
    };

    /*正则校验 automatically check when input or change*/
    Util.partialRegExpressions = {
        idCard: /^\d{0,18}$|\d{17}[x,X]|^\d{0,15}$/,
        cellphoneNumber: /^$|^1$|^1[3-9]$|^1[3-9]\d{1,9}$/,
        chinese: /^([\u4E00-\u9FA5]|[\uFE30-\uFFA0])*$/,//gi
        password: /^[a-zA-Z0-9]{1,20}$|^$/,
        loginName: /^[a-zA-Z0-9]{1,16}$|^$/,
        identifyingCode: /^[a-zA-Z0-9]{0,6}$/,
        bankCardNumber: /^\d{0,19}/,
        email: /^$|^([a-zA-Z0-9_-])*$|^([a-zA-Z0-9_-])+@$|^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])*$|^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.)$|^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,
    };

    /*blur to check*/
    Util.exactRegExpressions = {
        idCard: Util.checkIdCard,
        cellphoneNumber: /^1[3-9]\d{9}$/,
        password: /^[a-zA-Z0-9]{6,20}$/,
        loginName: /^[a-zA-Z0-9]{6,16}$|^$/,
        chinese: /^([\u4E00-\u9FA5]|[\uFE30-\uFFA0])+$/,
        identifyingCode: /^[a-zA-Z0-9]{6}$/,
        bankCardNumber: /\d{16,19}/,
        email: /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,
        telephoneNumber: /^[0-9-]{3,}$/,
        chineseName: /^([\u4E00-\u9FA5]|[\uFE30-\uFFA0]){2,}$/,
    };
    /**
     * cUtilDate 类型
     * @var Util.cUtilCommon.Date
     */
    Util.Date = cDate;
    /**
     * 获取服务端时间，cUtilDate.getServerDate快捷方式
     * @method Util.cUtilCommon.getServerDate
     * @param {function} [callback]
     * @returns {date} date 服务器时间
     */
    Util.getServerDate = cDate.getServerDate;
    /**
     * 是否在app中打开，app
     * @static
     * @var Util.cUtilCommon.isInApp
     * @type {boolean}
     */
    Util.isInApp = Kai.isHybrid;

    /**
     * 浏览器是否支持pushState方法
     * @var Util.cUtilCommon.isSupportPushState
     * @type {boolean}
     */
    Util.isSupportPushState = (function () {
        //如果是hybrid则走hashchange,不走pushstate
        if (Kai.isHybrid) {
            return false;
        }
        // return false;
        return !!(window.history &amp;&amp; window.history.pushState &amp;&amp; window.history.replaceState);
    })();

    /**
     * 是否为隐私模式
     * @var Util.cUtilCommon.isPrivateModel
     * @type {boolean}
     */
    Util.isPrivateModel = (function () {
        var testKey = "TEST_PRIVATE_MODEL",
            storage = window.localStorage;

        try {
            storage.setItem(testKey, 1);
            storage.removeItem(testKey);
        } catch (e) {
            return true;
        }
        return false;
    })();

    /**
     * 是否外链
     * @method Util.cUtilCommon.isSupportPushState
     * @param {string} url url链接
     * @returns {boolean}
     */
    Util.isExternalLink = function (url) {
        var RegH5NewType = new RegExp(/^mailto:|^tel:|^javascript:/);
        return RegH5NewType.test(url);
    };
    /**
     * 通过一个url唤醒app
     * @method Util.cUtilCommon.weakUpApp
     * @param {string} url 唤醒url，如ctripwireless://hoteml;
     */
    Util.weakUpApp = function (url) {
        var iframe = document.createElement('iframe');
        iframe.height = 1;
        iframe.width = 1;
        iframe.frameBorder = 0;
        iframe.style.position = 'absolute';
        iframe.style.left = '-9999px';
        iframe.style.top = '-9999px';
        document.body.appendChild(iframe);

        Util.weakUpApp = function (url) {
            iframe.src = url;
        };

        Util.weakUpApp(url);
    };

    /**
     * 每次调用生成一个GUID随意数 格式为f5b6bfaa-09ec-6bdd-2c81-c1f435dca270
     * @method Util.cUtilCommon.createGuid
     * @return {String} GUID 唯一标示
     */
    Util.createGuid = function () {
        function S4() {
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }

        function newGuid() {
            return (S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4());
        }

        return newGuid();
    };

    /**
     * 优先从cookie中取
     * 返回GUID，与createGuid不同的是，会首先检查LocalStorage中的值
     * @method Util.cUtilCommon.getGuid
     * @returns {string} GUID 唯一标示
     */
    Util.getGuid = function () {
        var guid = Util.getCookie("GUID");
        var ws = window.localStorage;
        if (!guid) {
            guid = ws.getItem('GUID') || '';
        } else {
            try {
                ws.setItem('GUID', guid);
            } catch (e) {

            }
        }

        /* if (!guid) {
         guid = Util.createGuid();
         try {
         ws.setItem('GUID', guid);
         } catch (e) {
         }
         }*/
        return guid;
    };
    /**
     * 获取cookie中的值
     */
    Util.getCookie = function (key) {
        var cookies = document.cookie;
        var value = "";
        if (cookies) {
            var cookieArr = cookies.split("; ");
            for (var i = 0, cookie, index; i &lt; cookieArr.length; i++) {
                cookie = cookieArr[i];
                index = cookie.indexOf("=");
                if (cookie.substr(0, index) == key) {
                    value = cookie.substr(index + 1);
                }
            }
        }
        return value;
    };

    /**
     * 返回是否为android平台
     * @var Util.cUtilCommon.isAndroid
     * @type {boolean}
     */
    Util.isAndroid = (function () {
        return $.os['android'];
    })();

    /**
     * 返回是否为iPhone平台
     * @var Util.cUtilCommon.isIPhone
     * @type {boolean}
     */
    Util.isIphone = (function () {
        return $.os['iphone'];
    })();

    /**
     * 返回是否为iPad平台
     * @var Util.cUtilCommon.isIpad
     * @type {boolean}
     */
    Util.isIpad = (function () {
        return $.os['ipad'];
    })();

    /**
     * 返回是否为Window Phone平台
     * @var Util.cUtilCommon.isWPhone
     * @type {boolean}
     */
    Util.isWPhone = (function () {
        return window.navigator.userAgent.indexOf('Windows Phone') > 1;
    })();

    Util.isUrl = function (url) {
        return /^http(s)?:\/\/[A-Za-z0-9\-]+\.[A-Za-z0-9]+[\/=\?%\-&amp;_~`@[\]\:+!]*([^&lt;>])*$/.test(url);
    };

    Util.withdrawKeyboard = function () {
        document.activeElement.blur();
    };

    //判断文本是否为空
    Util.isEmpty = function(val){
      return !val || (_.isString(val) &amp;&amp; !val.trim());
    };
    return Util;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Util.cUtilData.CData.html">Util.cUtilData.CData</a></li><li><a href="Util.cUtilDate.CDate.html">Util.cUtilDate.CDate</a></li></ul><h3>Namespaces</h3><ul><li><a href="topic_c.topic.html">topic/c.topic</a></li><li><a href="Util.cUtilCacheViews.html">Util.cUtilCacheViews</a></li><li><a href="Util.cUtilCryptBase64.html">Util.cUtilCryptBase64</a></li><li><a href="Util.cUtilCryptBase64.Base64.html">Util.cUtilCryptBase64.Base64</a></li><li><a href="Util.cUtilCryptRSA.html">Util.cUtilCryptRSA</a></li><li><a href="Util.cUtilDate.html">Util.cUtilDate</a></li><li><a href="Util.cUtilObject.html">Util.cUtilObject</a></li><li><a href="Util.cUtilPath.html">Util.cUtilPath</a></li><li><a href="Util.cUtilPerformance.html">Util.cUtilPerformance</a></li><li><a href="Util.cUtilValidate.html">Util.cUtilValidate</a></li><li><a href="Util.dgrid.html">Util.dgrid</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getQuery">getQuery</a></li><li><a href="global.html#showLog">showLog</a></li><li><a href="global.html#showToast">showToast</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Oct 13 2016 18:08:16 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
